<?php

namespace iikoExchangeBundle\Library\iiko\Request;

use iikoExchangeBundle\Library\base\Config\Types\DateDiffConfigItem;
use iikoExchangeBundle\Library\iiko\Reports\iikoReportFilter;
use iikoExchangeBundle\Library\iiko\Reports\Olap\Sales\FilterFields;
use Psr\Http\Message\RequestInterface;

abstract class AbstractOlapSalesDataRequest extends AbstractOlapDataRequest
{

	protected function getOlapType(): string
	{
		return self::TYPE_SALES;
	}

	public function getRequest(): RequestInterface
	{
		$this->filterFields[FilterFields::OpenDateTyped] = iikoReportFilter::dateRange(new \DateTime($this->config[FilterFields::OpenDateTyped]->getValue()), new \DateTime('tomorrow'), true, false);

		return parent::getRequest(); // TODO: Change the autogenerated stub
	}

	public function getConfig(): array
	{
		return [
			FilterFields::OpenDateTyped => new DateDiffConfigItem()
		];
	}
}